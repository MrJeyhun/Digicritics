generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  // TODO: DEV only?
  url      = env("POSTGRES_URL_DEV")
}

// schema.prisma

enum UserStatus {
  USER
  ADMIN
  BLOCKED
}

model Users {
  id           Int        @id @default(autoincrement())
  fullName     String
  email        String     @unique
  status       UserStatus @default(USER)
  profileImage String?
  createdTime  DateTime   @default(now())
  reviews      Review[]
  Like         Like[]
  Rating       Rating[]
  Comment      Comment[]
}

model Review {
  id          Int    @id @default(autoincrement())
  reviewTitle String
  workName    String
  category    String
  reviewGrade Int

  reviewContent String
  reviewImages  String[]

  tags     Tag[]
  likes    Like[]
  ratings  Rating[]
  comments Comment[]

  userId Int
  user   Users @relation(fields: [userId], references: [id])

  createdTime DateTime @default(now())
}

model Like {
  id       Int @id @default(autoincrement())
  userId   Int
  reviewId Int

  user   Users  @relation(fields: [userId], references: [id])
  review Review @relation(fields: [reviewId], references: [id])
}

model Rating {
  id       Int @id @default(autoincrement())
  userId   Int
  reviewId Int
  rating   Int

  user   Users  @relation(fields: [userId], references: [id])
  review Review @relation(fields: [reviewId], references: [id])
}

model Comment {
  id       Int    @id @default(autoincrement())
  userId   Int
  reviewId Int
  content  String

  user   Users  @relation(fields: [userId], references: [id])
  review Review @relation(fields: [reviewId], references: [id])
}

model Tag {
  id      Int      @id @default(autoincrement())
  name    String   @unique
  reviews Review[]
}
